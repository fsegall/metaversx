import{c as sn,d as cn}from"./chunk-D46EWUCP.js";import{a as E}from"./chunk-CT4PKJB3.js";import{a as H}from"./chunk-KVR366XS.js";import{a as w}from"./chunk-ZXZXEDS2.js";import{x as rn}from"./chunk-KM2BXRAX.js";import{a as u,b as v,i as an,j as L,m as G}from"./chunk-HBP5N4FR.js";G();rn();import t,{useEffect as dn,useState as x}from"react";import{faArrowLeft as un,faTimes as pn}from"@fortawesome/free-solid-svg-icons";import{FontAwesomeIcon as F}from"@fortawesome/react-fontawesome";import a from"classnames";var gn=C=>{var I;let{allTransactions:r,className:M,currentStep:e,currentTransaction:i,GuardianScreen:s,error:W,globalStyles:p,handleClose:$,handleSubmit:N,isLastTransaction:A,onPrev:O,onSignTransaction:j,signStepInnerClasses:b,styles:n,title:V,waitingForDevice:g,updatePPU:_}=C,[m,h]=x(!1),[S,q]=x({});if(!i)return null;let c=`${i.transaction.getNonce().valueOf().toString()}_${i.transactionTokenInfo.multiTxData}_${i.transactionIndex}`;dn(()=>{let T=Object.keys(S).includes(c),en=Object.values(S).includes(e);T||en||q(on=>v(u({},on),{[c]:e}))},[c,e]);let z=i.transaction.getData().toString(),{buttonsWrapperClassName:U,buttonClassName:P}=b||{},{type:J,multiTxData:B}=i.transactionTokenInfo,K=e===0,k=T=>{T.preventDefault(),K?$():O()},l=A&&!g,Q=()=>L(void 0,null,function*(){if(yield j(),l&&s)return h(!0);l&&N&&N()}),X=J&&B&&!z.endsWith(B),o="Sign & Continue";o=g?"Check your Ledger":o,o=l?"Sign & Submit":o,o=X?"Continue":o;let d={currentTransaction:i,updatePPU:_,error:W,allTransactions:r,currentStep:e,isGuarded:Boolean(s),signStepInnerClasses:b},y=()=>{h(!1)},Y=r.length>1?"Sign Transactions":"Sign Transaction",Z=r.length>1?"Confirm Transactions":"Confirm Transaction",R=r.length>1?`Signing Transaction ${e+1} of ${r.length}`:V||"Sign Transaction",f=s&&m,nn=f?"Verify Guardian":R,tn=[{title:Y,active:!m},{title:Z,active:m,hidden:!d.isGuarded}],D=S[c]===e;return t.createElement("div",{className:a(n==null?void 0:n.modalLayoutContent,n==null?void 0:n.spaced,M,{[(I=n==null?void 0:n.guarded)!=null?I:""]:d.isGuarded})},f&&t.createElement("div",{onClick:y,className:a(n==null?void 0:n.modalLayoutHeadingIcon,n==null?void 0:n.back)},t.createElement(F,{icon:un})),t.createElement("div",{onClick:k,className:a(n==null?void 0:n.modalLayoutHeadingIcon,n==null?void 0:n.close)},t.createElement(F,{icon:pn})),d.isGuarded&&t.createElement(H,{steps:tn,type:"detailed",size:"small"}),t.createElement("div",{className:n==null?void 0:n.title,"data-testid":"signStepTitle"},nn||"Confirm on Ledger"),f?t.createElement(s,v(u({},C),{onPrev:y,guardianFormDescription:"Enter the code from your Authenticator app to verify this transaction."})):t.createElement(t.Fragment,null,t.createElement(E,u({},d)),t.createElement("div",{className:a(n==null?void 0:n.signButtons,U)},t.createElement("button",{id:"closeButton","data-testid":"closeButton",onClick:k,className:a(n==null?void 0:n.signButtonCancel,P)},e===0?"Cancel":"Back"),t.createElement("button",{type:"button",className:a(p==null?void 0:p.btnPrimary,n==null?void 0:n.signButtonSubmit,P),id:"signBtn","data-testid":"signBtn",onClick:Q,disabled:g||!D},D?o:"Loading..."))))},En=w(gn,{ssrStyles:()=>import("../UI/SignTransactionsModals/SignWithDeviceModal/signWithDeviceModalStyles.js"),clientStyles:()=>(cn(),an(sn)).default});export{En as a};
//# sourceMappingURL=chunk-E4AOHIGB.js.map
