import{a as R}from"./chunk-JCAUBGCB.js";import{a as P}from"./chunk-5C4GAWRH.js";import{a as v}from"./chunk-Q2AR5236.js";import{c as h}from"./chunk-RFKFTNQQ.js";import{c as U,d as b}from"./chunk-KLQ5IZ6C.js";import{s as K}from"./chunk-SFJMMIST.js";import{i as W}from"./chunk-S55DZJQR.js";import{a as J}from"./chunk-MPMLX57E.js";import{a as r,c as w,d as T}from"./chunk-7UBLQIEN.js";import{g as k}from"./chunk-6CPM3VCF.js";import{e as S}from"./chunk-O7A5QY4S.js";import{h as y,j}from"./chunk-7YHU2LQD.js";import{a as I,b as q}from"./chunk-OWBHRN3S.js";import{a as L,b as d,j as f,m as u}from"./chunk-HBP5N4FR.js";u();j();import{useState as x}from"react";K();J();q();var ge=({callbackRoute:s,token:A,nativeAuth:a,redirectDelayMilliseconds:D=100,customWalletAddress:o})=>{let[c,N]=x(""),[O,l]=x(!1),C=b(W),n=U(),g=P(),E=Boolean(a),p=v(a),e=A;function M(){return f(this,null,function*(){if(g)throw new Error(y);n(T(r.address)),n(w(r)),n(S(o));try{l(!0);let t=h(o!=null?o:C.walletAddress),m=new Date,F=m.setMinutes(m.getMinutes()+3)/1e3,G={data:{},expires:F};if(E&&!e&&(e=yield p.getNativeAuthLoginToken(),!e)){console.warn("Login cancelled.");return}e&&p.setLoginToken(e);let{origin:_}=I(),$=window!=null&&window.location?`${_}${s}`:`${s}`;new URLSearchParams(document==null?void 0:document.location.search).get("address")||n(k(G));let z=R($),B=encodeURIComponent(z),H=d(L({callbackUrl:B},e&&{token:e}),{redirectDelayMilliseconds:D});yield t.login(H)}catch(t){console.error(t),N("error logging in"+t.message)}finally{l(!1)}})}let i=Boolean(c);return[M,{error:c,loginFailed:i,isLoading:O&&!i,isLoggedIn:g&&!i}]};export{ge as a};
//# sourceMappingURL=chunk-GEKJJSJ3.js.map
