import{b as o}from"./chunk-24AN3Y2V.js";import{a as d}from"./chunk-GUNAYXS5.js";import{a as f}from"./chunk-FAVYLC7T.js";import{s as T}from"./chunk-SFJMMIST.js";import{b as m}from"./chunk-2RJZ73G3.js";import{a as b,d as W}from"./chunk-EVEX5BE5.js";import{m as i}from"./chunk-HBP5N4FR.js";i();T();W();import{useEffect as k,useRef as C,useState as E}from"react";var N=({onPoll:c,pollingInterval:r})=>{let P=d(),u=r!=null?r:P,e=C(null),{address:l}=f(),[a,p]=E(o.status),t=()=>{e.current&&(clearInterval(e.current),e.current=null)};return k(()=>{let s=o.subscribe(n=>{console.info("Websocket status changed:",n),p(n)});return()=>s()},[]),k(()=>{let s=a==="COMPLETED";if(!l||s){t();return}if(!e.current)return console.info("Websocket connection failed. Starting polling fallback..."),e.current=setInterval(()=>{let S=o.status==="COMPLETED",{address:g}=m(b.getState());if(!g||S){t();return}c()},u),()=>{t()}},[l,a,c,u]),t};export{N as a};
//# sourceMappingURL=chunk-IQNPEBFU.js.map
